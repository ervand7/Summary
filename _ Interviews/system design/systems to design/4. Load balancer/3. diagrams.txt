# ğŸŒ Full picture: Load Balancer (maximum-complexity, readable)

```
                             CONTROL PLANE
              (slow, reliable, configuration & automation)

+---------------------------------------------------------------+    Admin UI â€” web interface to view/edit routes, backends, limits
| Admin UI / CI / GitOps / Operators                            |    CI â€” pipelines that validate and deploy config changes
+----------------------+----------------------------------------+    GitOps â€” configs stored in Git, changes via pull requests
                       |                                             Operators â€” humans who approve, debug, rollback
                       | REST / gRPC (configs, rollout, flags)
                       v
+---------------------------------------------------------------+
| LB Control Plane Service                                      |
|---------------------------------------------------------------|
| - routes (host, path, headers)                                |
| - backend pools                                               |
| - weights & algorithms                                        |
| - rate limits / timeouts                                      |
| - health-check policy                                         |
+----------------------+----------------------------------------+
                       |
                       | config distribution
                       v
+---------------------------------------------------------------+
| Config Store / Cache etcd                                     |                                                       |
+---------------------------------------------------------------+


                             DATA PLANE (HOT PATH)
                    (ultra-fast, stateless, no DB calls)

Clients (Web / Mobile / Services)
        |
        | HTTPS
        v
+---------------------------------------------------------------+
| DNS (Geo / Latency-based routing)                             |
+---------------------------------------------------------------+
        |
        v
+---------------------------------------------------------------+
| CDN (optional)                                                |
|---------------------------------------------------------------|
| - TLS termination (often)                                     |
| - caching static / semi-static responses                      |
| - DDoS absorption                                             |
+---------------------------------------------------------------+
        |
        | HTTPS / HTTP
        v
+---------------------------------------------------------------+
| Global Load Balancer (Anycast / Cloud Edge)                   | // Global load balancing is typically handled by managed
|---------------------------------------------------------------| // edge services like Cloudflare, AWS Global Accelerator, or DNS-based routing, not built in-house.
| - region selection                                            |
| - failover between regions                                    |
+---------------------------------------------------------------+
        |
        v
+---------------------------------------------------------------+
| Regional Load Balancer Cluster (active-active)                | // Our solution
|---------------------------------------------------------------|
|  +-------------+   +-------------+   +-------------+          |
|  |   LB #1     |   |   LB #2     |   |   LB #3     |          |
|  | (stateless) |   | (stateless) |   | (stateless) |          |
|  +------+------+   +------+------+   +------+------+          |
|         |                  |                  |               |
|         | shared config    |                  |               |
+---------+------------------+------------------+-------------+
          |                  |                  |
          v                  v                  v
+-------------------+  +-------------------+  +-------------------+
| Service Instance  |  | Service Instance  |  | Service Instance  |
| A (pod / VM)      |  | B (pod / VM)      |  | C (pod / VM)      |
+-------------------+  +-------------------+  +-------------------+

          â–²
          |
+---------------------------------------------------------------+
| Health Checking & Observability                               |
|---------------------------------------------------------------|
| - active probes (/health, /ready)                             |
| - passive error tracking                                      |
| - metrics, logs, traces                                       |
+---------------------------------------------------------------+
```

---

## ğŸ§  ĞšĞ°Ğº â€œÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒâ€ ÑÑ‚Ñƒ ÑÑ…ĞµĞ¼Ñƒ Ğ½Ğ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ

### 1ï¸âƒ£ Control plane â€” Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾, Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾

* ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¸
* Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°
* rollout
* versioning
* Ğ½Ğ¸ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ Ğ² hot path

> *â€œAll configuration changes are decoupled from request handling.â€*

---

### 2ï¸âƒ£ Data plane â€” Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¼

* Ğ½Ğ¸ĞºĞ°ĞºĞ¾Ğ³Ğ¾ DB
* Ğ½Ğ¸ĞºĞ°ĞºĞ¾Ğ³Ğ¾ Ğ±Ğ»Ğ¾ĞºĞ¸Ğ½Ğ³Ğ°
* Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ in-memory ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹
* O(1) Ğ¸Ğ»Ğ¸ O(log N) Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸

> *â€œThe data plane must stay fast even during config churn.â€*

---

### 3ï¸âƒ£ ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ LB-Ğ¸Ğ½ÑÑ‚Ğ°Ğ½ÑĞ¾Ğ²

* Ğ½ĞµÑ‚ single point of failure
* Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ CPU / connections
* Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ restart Ğ±ĞµĞ· Ğ¿Ğ¾Ñ‚ĞµÑ€Ğ¸ Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºĞ°

> *â€œLB instances are stateless and horizontally scalable.â€*

---

### 4ï¸âƒ£ Ğ—Ğ°Ñ‡ĞµĞ¼ CDN Ğ”Ğ LB

* Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ DDoS
* ĞºÑÑˆ
* TLS offload
* ÑƒĞ¼ĞµĞ½ÑŒÑˆĞµĞ½Ğ¸Ğµ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ½Ğ° LB

---

### 5ï¸âƒ£ Ğ“Ğ´Ğµ TLS Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ°Ñ‚ÑŒÑÑ

* CDN
* Global LB
* Regional LB

ğŸ‘‰ Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸

---

## ğŸ”‘ ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ñ„Ñ€Ğ°Ğ·Ğ°, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ·Ğ°ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½

> â€œThis architecture separates control and data planes, uses stateless active-active load
balancers, and pushes complexity to the edge while keeping the hot path minimal.â€
