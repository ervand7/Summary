Профилировщик может работать не только с запущенными приложениями,
но и с сохранёнными файлами профилей. Рассмотрим, как утилита pprof
помогает работать с профилями, которые созданы бенчмарками.
Запуская бенчмарки, вы можете записывать профили их выполнения с помощью
флагов: -cpuprofile=cpu.out и -memprofile=mem.out


Запустите бенчмарк-тест из предыдущего урока:
 ● go test -bench=. -cpuprofile=cpu.out
После окончания работы бенчмарка создадутся два файла:
 - файл-профиль cpu.out,
 - исполняемый файл с именем тестируемого пакета и
расширением test (например, bench.test).
Обычно go test уничтожает исполняемый файл, но при запуске с
параметрами -cpuprofile или -memprofile этот файл не удаляется. Дело в том,
что в журнал профилирования не включаются имена функций. Вместо этого
функции идентифицируются по адресам, поэтому для pprof лучше указать
соответствующий исполняемый файл.

Можно запустить профилировщик, указав исполняемый файл и CPU-профиль в параметре:
# консольный режим
 ● go tool pprof fibonacci.test cpu.out

# открыть журнал профилирования в браузере
 ● go tool pprof -http=":9090" bench.test cpu.out