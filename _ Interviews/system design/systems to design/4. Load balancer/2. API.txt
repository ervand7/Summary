# 1ï¸âƒ£ Backend management

### `POST /backends`

What it does:
ğŸ‘‰ Registers a new backend instance in the load balancer.

In real life:

* a new pod/VM starts
* it announces itself to the LB (or automation does)

```json
{
  "id": "users-v1",
  "address": "10.0.1.15:8080",
  "weight": 3
}
```

Meaning of fields:

* `id` â€” unique backend identifier
* `address` â€” where LB sends traffic
* `weight` â€” how much traffic it should get (relative)

Why needed:
LB must know where itâ€™s allowed to send requests.

---

### `GET /backends`

What it does:
ğŸ‘‰ Lists all registered backends.

Used by:

* operators
* automation
* debugging

Example question it answers:

> â€œWhich instances are currently part of the pool?â€

---

### `DELETE /backends/{id}`

What it does:
ğŸ‘‰ Removes a backend from rotation.

Used when:

* instance is shutting down
* deployment rollout
* manual mitigation

Important:
Usually traffic is drained first, not cut instantly.

---

# 2ï¸âƒ£ Health status

### `GET /backends/health`

What it does:
ğŸ‘‰ Shows LBâ€™s current opinion about backend health.

```json
{
  "users-v1": "healthy",
  "users-v2": "unhealthy"
}
```

Important:
This is NOT what backend *claims* â€”
this is what LB has observed.

Used by:

* dashboards
* alerting
* incident response

---

# 3ï¸âƒ£ Routing rules

### `POST /routes`

What it does:
ğŸ‘‰ Defines how requests are matched and routed.

```json
{
  "match": {
    "path": "/users",
    "method": "GET"
  },
  "backend_pool": "users-service",
  "algorithm": "least_connections"
}
```

Meaning:

* `match` â€” which requests this rule applies to
* `backend_pool` â€” group of backends to send traffic to
* `algorithm` â€” how to choose one backend

Example in words:

> â€œAll GET /users requests go to users-service using least-connections.â€

Why needed:
This is the core logic of the load balancer.

---

# 4ï¸âƒ£ Runtime stats

### `GET /stats`

What it does:
ğŸ‘‰ Exposes live metrics of the LB itself.

```json
{
  "rps": 12000,
  "active_connections": 830,
  "p95_latency_ms": 18
}
```

Why this matters:

* capacity planning
* autoscaling
* alerting
* debugging slowdowns

Important:
This is observability, not control.

---

# ğŸ§  Big picture (connect everything)

```
POST /backends   â†’ tells LB where traffic MAY go
POST /routes     â†’ tells LB how to route traffic
Health checks    â†’ decide where traffic SHOULD go
GET /stats       â†’ tells humans how LB is behaving
```
