Избегайте коммуникаций через общую, разделённую память, делитесь
данными через сообщения (Don't communicate by sharing memory,
share memory by communicating).

В bad.go работающий пример, но лучше его переделать, чтобы он
соответствовал принципу «Делитесь данными через сообщения». Для этого будем
использовать каналы вместо мьютексов — достаточно изменить структуру Generator и методы.
Код станет понятнее: его проще читать и поддерживать. Гарантии потокобезопасности
базового синтаксиса языка позволяют избежать ошибок конкурентного доступа и рисков
«выстрелить себе в ногу», в отличие от ручного разделения памяти
средствами библиотечных мьютексов.