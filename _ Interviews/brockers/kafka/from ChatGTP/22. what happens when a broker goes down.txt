## Что происходит, если брокер Kafka упал
1. Kafka это замечает
   Kafka-controller — видит, что один брокер недоступен.

2. Партиции теряют лидера
   Все партиции, у которых лидер находился на этом брокере, временно остаются без лидера.

3. Выбирается новый лидер
   Kafka выбирает нового лидера из ISR (реплик, которые были полностью синхронизированы).

4. Клиенты почти ничего не замечают
   Продюсеры и консумеры автоматически переключаются на нового лидера.


## Когда всё плохо
* Если в ISR нет ни одной реплики →
  партиция становится недоступной
  (или возможна потеря данных при небезопасных настройках).


## Что важно для собеседования
* Failover происходит автоматически
* Данных не теряем, если:
  * есть ISR
  * использовался `acks=all`
* Клиентам не нужно ничего делать
* Временно могут появиться under-replicated partitions


## Одной строкой
> Kafka переживает падение брокера, пока жива хотя бы одна ISR-реплика.
