В обычной реляционной DBMS данные одной записи (строки) хранятся максимально
физически близко друг к другу на диске. Поэтому мы можем быстро обновлять данные
какой-то записи. А в ClickHouse данные какой-то колонки хранятся максимально близко
друг к другу.

Модели взаимодействия OLTP и OLAP:
OLTP: транзакционность, вставка, изменение, удаление
OLAP: запросы на агрегацию, вставка (мало), чтение (много)

Преимущества:
 - SQL
 - сжатие данных
 - параллельная обработка запроса на нескольких процессорных ядрах
 - если данные, которые запрашиваем, раскиданы на несколько серверов (распределены)
 они хорошо, параллельно обрабатываются
 - наличие индекса

Особенности:
 - отсутствие транзакций
 - массовые вставки и удаления
 - разраженный индекс делает ClickHouse плохо пригодным для точечных чтений единичных записей
 - строки любой длины (в отличие от Postgres)

Движки:
 - Семейство движков Log:
    Используется, когда необходимо записать много таблиц с небольшим объемом данных
    (менее 1 млн строк), а затем читать их целиком
    - данные хранятся на диске
    - добавляются в конец файла
    - не поддерживают операций мутации
    - не поддерживают индексы
    - записывают данные не атомарно

 - Семейство движков MergeTree:
    Идея такая: данные сначала записываются во временные хранилища, а потом в фоновом
    режиме склеиваются
    - данные хранятся отсортированными по первичному ключу
    - позволяет оперировать партициями, если задан ключ партиционирования
    - поддерживает репликацию

Первичный ключ и ключ сортировки:
 - таблица состоит из кусков данных (data part) отсортированных по первичному ключу
 - при вставке создаются отдельные куски данных, каждый из которых отсортирован по
 первичному ключу
 - каждый кусок данных логически делится на гранулы
 - гранула - минимальный неделимый набор данных, который ClickHouse вычитывает при выборке
 - первая строка гранулы помечается значением первичного ключа (засечка)

Партиционирование:
Это механизм хранения, которым управляем мы. С точки зрения вставки/выборки мы с ней
не можем взаимодействовать. Партиционирование делается по месяцам. ClickHouse рекомендуеи
иметь не более 1000 партиций на таблицу. Благодаря партициям мы можем разом
удалять старые ненужные данные
