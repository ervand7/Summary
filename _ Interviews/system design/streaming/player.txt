# 1ï¸âƒ£ âŒ Streaming video is NOT an API-driven thing in the usual sense

There is:

* NO `/play` API returning bytes
* NO backend pushing video frames
* NO WebSocket streaming video

âœ… Instead:

> The backend gives metadata + signed URLs
> The player downloads media directly from CDN using HTTP

This single idea unlocks everything.

---

# 2ï¸âƒ£ High-level picture (burn this into memory)

```
User presses "Play"
        |
        v
Frontend / Player SDK
        |
        | 1ï¸âƒ£ REST API (JSON)
        v
Playback / Metadata Service
        |
        | returns manifest + DRM + signed URLs
        v
Player (browser / mobile / TV)
        |
        | 2ï¸âƒ£ HTTP GET (media chunks)
        v
CDN (CloudFront / Akamai / Netflix Open Connect)
```

ğŸ‘‰ APIs are control plane
ğŸ‘‰ Video delivery is data plane

---

# 3ï¸âƒ£ What actually happens when you press â–¶ï¸ Play

### Step 1 â€” Playback API (normal REST)

```http
POST /v1/playback/start
```

Response (simplified):

```json
{
  "asset_id": "movie_123",
  "manifest_url": "https://cdn.example.com/manifests/movie_123.mpd",
  "drm": {
    "type": "widevine",
    "license_url": "https://drm.example.com/license"
  },
  "expires_at": 1735203600
}
```

ğŸ“Œ This is the last moment the backend is involved

---

### Step 2 â€” Manifest file (this is the key!)

The player downloads a manifest:

* HLS â†’ `.m3u8`
* DASH â†’ `.mpd`

This file describes:

* available qualities (240p, 720p, 4K)
* audio tracks
* subtitles
* chunk duration
* codecs

ğŸ“„ Example (conceptual):

```
1080p â†’ segments of 4s
720p  â†’ segments of 4s
audio â†’ separate track
```

---

### Step 3 â€” Chunk-based streaming (pure HTTP)

The player now does:

```http
GET /video/1080p/segment_0001.ts
GET /video/1080p/segment_0002.ts
GET /video/1080p/segment_0003.ts
```

âœ… Normal HTTP
âœ… Over CDN
âœ… Cacheable
âœ… Seekable
âœ… Resumeable

No backend logic here.

---

# 4ï¸âƒ£ Why chunked streaming exists (interview gold)

| Problem           | Solution                  |
| ----------------- | ------------------------- |
| Slow network      | Lower quality             |
| User seeks        | Download different chunks |
| Packet loss       | Retry single chunk        |
| Millions of users | CDN cache                 |

ğŸ‘‰ Adaptive Bitrate Streaming (ABR)

The player:

* measures bandwidth
* switches quality dynamically
* never stalls the backend

---

# 5ï¸âƒ£ Protocols you MUST know (non-negotiable)

## ğŸ¥ Video streaming protocols

| Protocol  | Used where                 |
| --------- | -------------------------- |
| HLS       | iOS, Safari, Apple TV      |
| MPEG-DASH | Android, Chrome, Smart TVs |
| CMAF      | Modern common format       |

ğŸ“Œ Netflix uses both HLS and DASH

---

## ğŸ” DRM (this is where backend comes back)

| DRM       | Platform        |
| --------- | --------------- |
| Widevine  | Android, Chrome |
| FairPlay  | Apple           |
| PlayReady | Windows         |

Flow:

```
Player â†’ DRM license server â†’ key â†’ decrypt chunk
```

â— Video is encrypted on CDN

---

# 6ï¸âƒ£ What the backend actually does (your responsibility)

As a backend engineer, you typically own:

### âœ… Control plane

* playback authorization
* entitlement checks
* geo restrictions
* signed URLs
* DRM license validation

### âŒ NOT data plane

* no video bytes
* no transcoding at request time
* no pushing frames

---

# 7ï¸âƒ£ CDN is NOT dumb storage (important!)

CDN responsibilities:

* cache video chunks
* validate signed URLs
* enforce expiration
* sometimes apply geo rules

ğŸ“Œ Signed URL example:

```
https://cdn.example.com/seg_001.ts
  ?exp=1735203600
  &sig=abc123
```

CDN verifies signature without calling backend.

---

# 8ï¸âƒ£ Browser vs Mobile vs TV (common confusion)

| Platform | Player          |
| -------- | --------------- |
| Browser  | HTML5 `<video>` |
| iOS      | AVPlayer        |
| Android  | ExoPlayer       |
| TV       | Native SDK      |

Backend sees no difference.

---

# 9ï¸âƒ£ Telemetry & analytics (often forgotten)

Players send events, not streams:

```http
POST /v1/playback/events
```

Events:

* start
* pause
* rebuffer
* quality change
* error

ğŸ“Œ These go to Kafka / analytics pipelines.

---

# ğŸ”Ÿ Best practices (what interviewers expect)

### âœ… DO

* chunk size 2â€“6 seconds
* signed URLs
* CDN-first architecture
* adaptive bitrate
* DRM everywhere

### âŒ DONâ€™T

* stream via backend
* use WebSockets for video
* keep long-lived HTTP connections
* store user sessions on video servers
