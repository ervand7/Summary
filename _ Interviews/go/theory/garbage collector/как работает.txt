–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ GC —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Ñ–∞–π–ª–µ: src/runtime/mgc.go

GC —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º–∞ Mark and Sweep:

Mark ‚Äî —Ñ–∞–∑–∞ —Ä–∞–∑–º–µ—Ç–∫–∏:
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é —Ç—Ä–µ—Ö—Ü–≤–µ—Ç–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞. –û–Ω –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π.
  - –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫—É—á–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ –≤–∏–¥–µ –≥—Ä–∞—Ñ–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.
  - –ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–∫—Ä–∞—à–µ–Ω –≤ –æ–¥–∏–Ω –∏–∑ —Ç—Ä—ë—Ö —Ü–≤–µ—Ç–æ–≤: –±–µ–ª—ã–π, —Å–µ—Ä—ã–π, —á–µ—Ä–Ω—ã–π.
  - –û–±—Ö–æ–¥ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∫–æ—Ä–Ω–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö).
  - –û–±—ä–µ–∫—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∏, —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —á–µ—Ä–Ω—ã–º–∏.
  - –°–µ—Ä—ã–µ ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã, –Ω–æ –∏—Ö —Å—Å—ã–ª–∫–∏ –µ—â–µ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã.
  - –ë–µ–ª—ã–µ ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ—Ç —Å—Å—ã–ª–æ–∫; –æ–Ω–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è "–º–µ—Ä—Ç–≤—ã–º–∏" –∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.

Sweep ‚Äî —Ñ–∞–∑–∞ –æ—á–∏—Å—Ç–∫–∏:
- –£–¥–∞–ª—è—é—Ç—Å—è –æ–±—ä–µ–∫—Ç—ã, –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –±–µ–ª—ã–º–∏ –ø–æ—Å–ª–µ —Ñ–∞–∑—ã Mark.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
- GC –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `runtime.GC()`.
- –ù–∞ —Ä–∞–±–æ—Ç—É GC –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –æ–∫–æ–ª–æ 25% CPU, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

-----------------------------------------------------------------------------

üìå –≠—Ç–∞–ø—ã —Ñ–∞–∑—ã Mark:
 - Mark Setup ‚Äì STW
–û—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∞—è –ø–∞—É–∑–∞. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞: –≤—Å–µ –ø–æ—Ç–æ–∫–∏ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è, —á—Ç–æ–±—ã GC –º–æ–≥
–±–µ–∑–æ–ø–∞—Å–Ω–æ –Ω–∞—á–∞—Ç—å —Ñ–∞–∑—É Mark.
 - Marking ‚Äì ‚úÖ Concurrent
–ì–ª–∞–≤–Ω–∞—è —á–∞—Å—Ç—å —Ñ–∞–∑—ã Mark. GC —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –≤–∞—à–∏–º –∫–æ–¥–æ–º.
–ü–æ—Ç–æ–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, –∞ GC –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≥—Ä–∞—Ñ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ —Ñ–æ–Ω–µ.
 - Mark Termination ‚Äì STW
–ó–∞–≤–µ—Ä—à–∞—é—â–∞—è –∫–æ—Ä–æ—Ç–∫–∞—è –ø–∞—É–∑–∞. GC –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –ø–æ—è–≤–∏–ª–∏—Å—å –ª–∏ –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã, –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ç–∫—É.